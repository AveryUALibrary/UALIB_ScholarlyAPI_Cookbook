
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>…in Unix Shell &#8212; Scholarly API Cookbook</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="World Bank" href="../A_overview/worldbank_overview.html" />
    <link rel="prev" title="Z39.50" href="../A_overview/z3950_overview.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../../_static/UALIB_logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Scholarly API Cookbook</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../about/introduction.html">
                    Introduction
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  ARTICLE FULL-TEXT
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../A_overview/SDirect_overview.html">
   ScienceDirect
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/python_SDirect.html">
     …in Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="shell_SDirect.html">
     …in Unix Shell
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../matlab/matlab_SDirect.html">
     …in Matlab
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../mathematica/mathematica_SDirect.html">
     …in Mathematica
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  BIBLIOGRAPHIC/GENERAL
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../A_overview/crossref_overview.html">
   Crossref
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/python_crossref.html">
     …in Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="shell_crossref.html">
     …in Unix Shell
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../matlab/matlab_crossref.html">
     …in Matlab
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../mathematica/mathematica_crossref.html">
     …in Mathematica
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../A_overview/scopus_overview.html">
   Scopus
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/python_scopus.html">
     …in Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="shell_scopus.html">
     …in Unix Shell
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../matlab/matlab_scopus.html">
     …in Matlab
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../mathematica/mathematica_scopus.html">
     …in Mathematica
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../A_overview/wikidata_overview.html">
   Wikidata
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../mathematica/mathematica_wikidata.html">
     …in Mathematica
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../A_overview/z3950_overview.html">
   Z39.50
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     …in Unix Shell
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  BUSINESS
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../A_overview/worldbank_overview.html">
   World Bank
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/python_worldbank.html">
     …in Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="shell_worldbank.html">
     …in Unix Shell
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../matlab/matlab_worldbank.html">
     …in Matlab
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../mathematica/mathematica_worldbank.html">
     …in Mathematica
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  HUMANITIES
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../A_overview/chronam_overview.html">
   Chronicling America
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/python_chronam.html">
     …in Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="shell_chronam.html">
     …in Unix Shell
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../matlab/matlab_chronam.html">
     …in Matlab
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../mathematica/mathematica_chronam.html">
     …in Mathematica
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  SCIENTIFIC
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../A_overview/casc_overview.html">
   CAS Common Chemistry
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/python_casc.html">
     …in Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="shell_casc.html">
     …in Unix Shell
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../matlab/matlab_casc.html">
     …in Matlab
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../mathematica/mathematica_casc.html">
     …in Mathematica
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../A_overview/pubchem_overview.html">
   PubChem
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/python_pubchem.html">
     …in Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="shell_pubchem.html">
     …in Unix Shell
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../matlab/matlab_pubchem.html">
     …in Matlab
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../mathematica/mathematica_pubchem.html">
     …in Mathematica
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../A_overview/pubmed_overview.html">
   PubMed
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
  <label for="toctree-checkbox-10">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/python_pubmed.html">
     …in Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="shell_pubmed.html">
     …in Unix Shell
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../matlab/matlab_pubmed.html">
     …in Matlab
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../mathematica/mathematica_pubmed.html">
     …in Mathematica
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  SOCIAL SCIENCES
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../A_overview/uscensus_overview.html">
   U.S. Census Data
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
  <label for="toctree-checkbox-11">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../python/python_uscensus.html">
     …in Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="shell_uscensus.html">
     …in Unix Shell
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../matlab/matlab_uscensus.html">
     …in Matlab
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../mathematica/mathematica_uscensus.html">
     …in Mathematica
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  ABOUT
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../about/contributing.html">
   Contributing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../about/license_reuse.html">
   License and Reuse
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../about/tech_details.html">
   Technical Details
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/ualibweb/UALIB_ScholarlyAPI_Cookbook"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/ualibweb/UALIB_ScholarlyAPI_Cookbook/issues/new?title=Issue%20on%20page%20%2Fcontent/scripts/shell/shell_z3950.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../../../_sources/content/scripts/shell/shell_z3950.rst"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.rst</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#z39-50-in-unix-shell">
   Z39.50 in Unix Shell
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#program-requirements">
     Program requirements
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-very-brief-introduction-to-z39-50">
     A very brief introduction to Z39.50
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#what-is-z39-50">
       What is Z39.50?
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#what-do-end-users-in-2023-use-z39-50-for">
       What do end-users in 2023 use Z39.50 for?
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#what-else-can-i-use-z39-50-for">
       What else can I use Z39.50 for?
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#why-would-i-use-z39-50-instead-of-a-web-service-api">
       Why would I use Z39.50 instead of a web service API?
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#how-do-i-find-z39-50-connection-details">
       How do I find Z39.50 connection details?
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#how-do-i-construct-z39-50-queries">
       How do I construct Z39.50 queries?
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#basic-ua-libraries-catalog-searching">
     1. Basic UA Libraries Catalog Searching
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#keyword-title-and-author-searches">
       Keyword, Title, and Author searches
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#identifier-searches">
       Identifier searches
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#searching-ua-libraries-catalog-in-a-loop">
     2. Searching UA Libraries Catalog in a Loop
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#retrieve-record-s-data">
     3. Retrieve Record(s) Data
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#usmarc">
       USmarc
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#opac">
       OPAC
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#saving-raw-marc-data">
       Saving Raw MARC data
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#z39-demo-a-small-z39-50-c-program-using-the-yaz-toolkit">
     4. z39-demo - A small Z39.50 C program using the YAZ toolkit
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#dependencies">
       Dependencies
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#compiling-from-source">
       Compiling from source
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#running-z39-demo">
       Running z39-demo
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>…in Unix Shell</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#z39-50-in-unix-shell">
   Z39.50 in Unix Shell
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#program-requirements">
     Program requirements
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-very-brief-introduction-to-z39-50">
     A very brief introduction to Z39.50
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#what-is-z39-50">
       What is Z39.50?
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#what-do-end-users-in-2023-use-z39-50-for">
       What do end-users in 2023 use Z39.50 for?
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#what-else-can-i-use-z39-50-for">
       What else can I use Z39.50 for?
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#why-would-i-use-z39-50-instead-of-a-web-service-api">
       Why would I use Z39.50 instead of a web service API?
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#how-do-i-find-z39-50-connection-details">
       How do I find Z39.50 connection details?
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#how-do-i-construct-z39-50-queries">
       How do I construct Z39.50 queries?
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#basic-ua-libraries-catalog-searching">
     1. Basic UA Libraries Catalog Searching
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#keyword-title-and-author-searches">
       Keyword, Title, and Author searches
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#identifier-searches">
       Identifier searches
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#searching-ua-libraries-catalog-in-a-loop">
     2. Searching UA Libraries Catalog in a Loop
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#retrieve-record-s-data">
     3. Retrieve Record(s) Data
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#usmarc">
       USmarc
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#opac">
       OPAC
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#saving-raw-marc-data">
       Saving Raw MARC data
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#z39-demo-a-small-z39-50-c-program-using-the-yaz-toolkit">
     4. z39-demo - A small Z39.50 C program using the YAZ toolkit
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#dependencies">
       Dependencies
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#compiling-from-source">
       Compiling from source
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#running-z39-demo">
       Running z39-demo
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section id="in-unix-shell">
<h1>…in Unix Shell<a class="headerlink" href="#in-unix-shell" title="Permalink to this headline">#</a></h1>
<section id="z39-50-in-unix-shell">
<h2>Z39.50 in Unix Shell<a class="headerlink" href="#z39-50-in-unix-shell" title="Permalink to this headline">#</a></h2>
<p>by Vincent Scalfani and Cyrus Gomes</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This an alpha version of a Z39.50 tutorial; we are still learning
about Z39.50 query construction and how best to apply a workflow for searching
library catalogs programmatically. Comments are certainly welcome.</p>
</div>
<p><strong>UA Libraries Z39.50 Connection Details:</strong>
<a class="reference external" href="http://www.lib.ua.edu/research-tools/university-libraries-catalog/z39-50-connection/">http://www.lib.ua.edu/research-tools/university-libraries-catalog/z39-50-connection/</a></p>
<p>These recipe examples were tested in February 2023 using Ubuntu 22.04 LTS and YAZ 5.31.1.</p>
<section id="program-requirements">
<h3>Program requirements<a class="headerlink" href="#program-requirements" title="Permalink to this headline">#</a></h3>
<p>For <strong>1.</strong> through <strong>3.</strong> below, you will need to install Index Data’s <a class="reference external" href="https://www.indexdata.com/resources/software/yaz/">yaz-client</a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">yaz-client</span></code> is a <a class="reference external" href="https://www.loc.gov/z3950/agency/">Z39.50</a> and <a class="reference external" href="https://www.loc.gov/standards/sru/">SRU (Search/Retrieval via URL)</a> command-line program.
More broadly, the YAZ suite of software is an open source toolkit:</p>
<p><a class="reference external" href="https://github.com/indexdata/yaz">https://github.com/indexdata/yaz</a></p>
<p>On Debian-based Linux systems, you can install the <code class="docutils literal notranslate"><span class="pre">yaz-client</span></code>
(and dependencies) via <code class="docutils literal notranslate"><span class="pre">apt-get</span></code>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>sudo apt-get install yaz yaz-doc
</pre></div>
</div>
<p>For other ways to install <code class="docutils literal notranslate"><span class="pre">yaz</span></code> and <code class="docutils literal notranslate"><span class="pre">yaz-client</span></code>, see Index Data’s documentation:</p>
<p><a class="reference external" href="https://software.indexdata.com/yaz/doc/">https://software.indexdata.com/yaz/doc/</a></p>
</section>
<section id="a-very-brief-introduction-to-z39-50">
<h3>A very brief introduction to Z39.50<a class="headerlink" href="#a-very-brief-introduction-to-z39-50" title="Permalink to this headline">#</a></h3>
<section id="what-is-z39-50">
<h4>What is Z39.50?<a class="headerlink" href="#what-is-z39-50" title="Permalink to this headline">#</a></h4>
<p>Z39.50 is a standardized protocol that defines communication rules between a client computer
(e.g., your computer) and a server computer (e.g., a library database server) <a class="footnote-reference brackets" href="#ref0" id="id1">1</a>.
The protocol also includes a query language, defines record syntax,
and other important parameters for exchanging information <a class="footnote-reference brackets" href="#ref1" id="id2">2</a>.
For additional Z39.50 background and references, see <a class="footnote-reference brackets" href="#ref2" id="id3">3</a>, <a class="footnote-reference brackets" href="#ref3" id="id4">4</a>,
and <a class="footnote-reference brackets" href="#ref4" id="id5">5</a>. A copy of the Z39.50 standard is available from the Library of Congress <a class="footnote-reference brackets" href="#ref5" id="id6">6</a>.</p>
<p>Z39.50 has been around for decades and is still widely used in libraries at the staff level, for example,
to retrieve metadata and search partner library catalogs.</p>
</section>
<section id="what-do-end-users-in-2023-use-z39-50-for">
<h4>What do end-users in 2023 use Z39.50 for?<a class="headerlink" href="#what-do-end-users-in-2023-use-z39-50-for" title="Permalink to this headline">#</a></h4>
<p>Today, the majority of end-users use a graphical website environment (via HTTP/HTTPS),
not Z39.50 for searching library catalogs. In our experience, end-users still use Z39.50 to configure
bibliographic software managers for searching the UA Libraries catalog.</p>
</section>
<section id="what-else-can-i-use-z39-50-for">
<h4>What else can I use Z39.50 for?<a class="headerlink" href="#what-else-can-i-use-z39-50-for" title="Permalink to this headline">#</a></h4>
<p>You can use Z39.50 to search library catalogs programmtically with your own custom scripts and software.</p>
</section>
<section id="why-would-i-use-z39-50-instead-of-a-web-service-api">
<h4>Why would I use Z39.50 instead of a web service API?<a class="headerlink" href="#why-would-i-use-z39-50-instead-of-a-web-service-api" title="Permalink to this headline">#</a></h4>
<p>If the information is available via a web service (e.g., REST) API, it’s definitely easier to use an
API compared to Z39.50. However, to our knowledge, there is not wide availability
of API access for individual institution level library
catalog searches. As a result, Z39.50 may be your only choice.</p>
</section>
<section id="how-do-i-find-z39-50-connection-details">
<h4>How do I find Z39.50 connection details?<a class="headerlink" href="#how-do-i-find-z39-50-connection-details" title="Permalink to this headline">#</a></h4>
<p>You can find UA Libraries Z39.50 connection details here:</p>
<p><a class="reference external" href="http://www.lib.ua.edu/research-tools/university-libraries-catalog/z39-50-connection/">http://www.lib.ua.edu/research-tools/university-libraries-catalog/z39-50-connection/</a></p>
<p>For other Z39.50 connection details, see the Library of Congress Z39.50 Gateway:</p>
<p><a class="reference external" href="https://www.loc.gov/z3950/">https://www.loc.gov/z3950/</a></p>
<p>Index Data also maintains some Z39.50 accessible database indexes such as Project Gutenberg and Wikipedia:</p>
<p><a class="reference external" href="https://www.indexdata.com/resources/open-content/">https://www.indexdata.com/resources/open-content/</a></p>
</section>
<section id="how-do-i-construct-z39-50-queries">
<h4>How do I construct Z39.50 queries?<a class="headerlink" href="#how-do-i-construct-z39-50-queries" title="Permalink to this headline">#</a></h4>
<p>Constructing Z39.50 queries is likely different from what you are used to with modern database boolean queries.
Z39.50 allows for different query specifications (see p. 23 in <a class="footnote-reference brackets" href="#ref5" id="id7">6</a>). A commonly implemented specification is
the Type-1 query, which is Reverse Polish Notation (RPN) with the bib-1 attribute set. Standard operators typically
accepted include: AND, OR, AND-NOT. Result sets are often limited to 10,000 maximum returned.</p>
<p>The entire bib-1 attribute set can be viewed in the manual pages on linux-baed systems:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>man bib1-attr
</pre></div>
</div>
<p>or online at: <a class="reference external" href="https://www.loc.gov/z3950/agency/defns/bib1.html">https://www.loc.gov/z3950/agency/defns/bib1.html</a></p>
<p>There are a variety of different attributes included in the bib-1 set including Use (1), Relation
(2), Position (3), Structure (4), Truncation (5) and Completeness (6).</p>
<p>Here are a few selected examples for each attribute type along with the corresponding value and name:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># not a complete set, examples only.</span>
Use<span class="o">(</span><span class="m">1</span><span class="o">)</span>
   <span class="m">1</span>     Personal-name
   <span class="m">4</span>     Title
   <span class="m">7</span>     ISBN
   <span class="m">16</span>    LC-call-number
   <span class="m">21</span>    Subject-heading
   <span class="m">30</span>    Date
   <span class="m">62</span>    Abstract
   <span class="m">1001</span>  Record-type
   <span class="m">1003</span>  Author
   <span class="m">1016</span>  Any
   <span class="m">1018</span>  Publisher
   <span class="m">1023</span>  Indexed-by
   <span class="m">1036</span>  Author-Title-Subject

RELATION <span class="o">(</span><span class="m">2</span><span class="o">)</span>
   <span class="m">1</span> Less than
   <span class="m">2</span> Less than or equal
   <span class="m">3</span> Equal
   <span class="m">4</span> Greater or equal
   <span class="m">5</span> Greater than
   <span class="m">6</span> Not equal

POSITION <span class="o">(</span><span class="m">3</span><span class="o">)</span>
   <span class="m">1</span> First <span class="k">in</span> field
   <span class="m">2</span> First <span class="k">in</span> subfield
   <span class="m">3</span> Any position <span class="k">in</span> field

STRUCTURE <span class="o">(</span><span class="m">4</span><span class="o">)</span>
   <span class="m">1</span> Phrase
   <span class="m">2</span> Word
   <span class="m">3</span> Key
   <span class="m">4</span> Year

TRUNCATION <span class="o">(</span><span class="m">5</span><span class="o">)</span>
   <span class="m">1</span> Right truncation
   <span class="m">2</span> Left truncation
   <span class="m">3</span> Left and right truncation
   <span class="m">100</span> Do not truncate

COMPLETENESS <span class="o">(</span><span class="m">6</span><span class="o">)</span>
   <span class="m">1</span> Incomplete subfield
   <span class="m">2</span> Complete subfield
   <span class="m">3</span> Complete field
</pre></div>
</div>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Something to be aware of is that Z39.50 implementations do not have to support all bib-1 attributes,
so you will want to look at the Z39.50 connection details carefully for a list of supported attributes.
For example, the UA Z39.50 implementation does not support relation attributes; all relations are considered equal.</p>
</div>
<p>To construct a query, you first define the operator (if needed), then the attribute(s), then the keyword(s).
Here are a few basic examples:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># search for `cheminformatics` in the title field</span>
@attr <span class="nv">1</span><span class="o">=</span><span class="m">4</span> <span class="s2">&quot;cheminformatics&quot;</span>

<span class="c1"># search for `cheminformatics` in the title field at first position with truncation</span>
@attr <span class="nv">1</span><span class="o">=</span><span class="m">4</span> @attr <span class="nv">3</span><span class="o">=</span><span class="m">1</span> @attr <span class="nv">5</span><span class="o">=</span><span class="m">1</span> <span class="s2">&quot;cheminformatics&quot;</span>

<span class="c1"># search for `cheminformatics` in the title field and author `noordik`</span>
@and @attr <span class="nv">1</span><span class="o">=</span><span class="m">4</span> <span class="s2">&quot;cheminformatics&quot;</span> @attr <span class="nv">1</span><span class="o">=</span><span class="m">1003</span> <span class="s2">&quot;noordik&quot;</span>

<span class="c1"># search for `cheminformatics` in the title field but not &quot;bioinformatics&quot;</span>
@not @attr <span class="nv">1</span><span class="o">=</span><span class="m">4</span> <span class="s2">&quot;cheminformatics&quot;</span> @attr <span class="nv">1</span><span class="o">=</span><span class="m">4</span> <span class="s2">&quot;bioinformatics&quot;</span>

<span class="c1"># search for `drug discovery` in the abstract or title</span>
@or @attr @1<span class="o">=</span><span class="m">4</span> <span class="s2">&quot;drug discovery&quot;</span> @attr <span class="nv">1</span><span class="o">=</span><span class="m">62</span> <span class="s2">&quot;drug discovery&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="basic-ua-libraries-catalog-searching">
<h3>1. Basic UA Libraries Catalog Searching<a class="headerlink" href="#basic-ua-libraries-catalog-searching" title="Permalink to this headline">#</a></h3>
<p>We will use the <code class="docutils literal notranslate"><span class="pre">yaz-client</span></code> program for these search examples. First, start <code class="docutils literal notranslate"><span class="pre">yaz-client</span></code> in your terminal:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>yaz-client
</pre></div>
</div>
<p>After starting yaz-client, you should see a <code class="docutils literal notranslate"><span class="pre">Z&gt;</span></code> prompt in the terminal. Next, open the connection to the
UA Libraries Catalog:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>open library.ua.edu:7090/voyager
</pre></div>
</div>
<p>If the connection is successful, you should get something like this:</p>
<p><strong>Output:</strong></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>Connecting...OK.
Sent initrequest.
Connection accepted by v3 target.
ID     : <span class="m">34</span>
Name   : Voyager LMS - Z39.50 Server
Version: <span class="m">2010</span>.3.0
Options: search present
Elapsed: <span class="m">0</span>.358596
</pre></div>
</div>
<p>Once connected to the UA Libraries Catalog, we can then search the catalog and retrieve records.</p>
<p>To exit <code class="docutils literal notranslate"><span class="pre">yaz-client</span></code>, type <code class="docutils literal notranslate"><span class="pre">quit</span></code></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>quit
</pre></div>
</div>
<p><strong>Output:</strong></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>See you later, alligator.
</pre></div>
</div>
<section id="keyword-title-and-author-searches">
<h4>Keyword, Title, and Author searches<a class="headerlink" href="#keyword-title-and-author-searches" title="Permalink to this headline">#</a></h4>
<p>Search for “dinosaur” as a keyword in any field (<code class="docutils literal notranslate"><span class="pre">1=1016</span></code>)</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>find @attr <span class="nv">1</span><span class="o">=</span><span class="m">1016</span> <span class="s2">&quot;dinosaur&quot;</span>
</pre></div>
</div>
<p><strong>Output:</strong></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>Sent searchRequest.
Received SearchResponse.
Search was a success.
Number of hits: <span class="m">504</span>
records returned: <span class="m">0</span>
Elapsed: <span class="m">0</span>.052500
</pre></div>
</div>
<p>Search for “dinosaur” in the title field (<code class="docutils literal notranslate"><span class="pre">1=4</span></code>) at first position (<code class="docutils literal notranslate"><span class="pre">3=1</span></code>) with truncation (<code class="docutils literal notranslate"><span class="pre">5=1</span></code>)</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>find @attr <span class="nv">1</span><span class="o">=</span><span class="m">4</span> @attr <span class="nv">3</span><span class="o">=</span><span class="m">1</span> @attr <span class="nv">5</span><span class="o">=</span><span class="m">1</span> <span class="s2">&quot;dinosaur&quot;</span>
</pre></div>
</div>
<p><strong>Output:</strong></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>Sent searchRequest.
Received SearchResponse.
Search was a success.
Number of hits: <span class="m">180</span>
records returned: <span class="m">0</span>
Elapsed: <span class="m">0</span>.076650
</pre></div>
</div>
<p>Search for “dinosaur” or “dinosauria” in the title field (<code class="docutils literal notranslate"><span class="pre">1=4</span></code>):</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>find @or @attr <span class="nv">1</span><span class="o">=</span><span class="m">4</span> <span class="s2">&quot;dinosaur&quot;</span> @attr <span class="nv">1</span><span class="o">=</span><span class="m">4</span> <span class="s2">&quot;dinosauria&quot;</span>
</pre></div>
</div>
<p><strong>Output:</strong></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>Sent searchRequest.
Received SearchResponse.
Search was a success.
Number of hits: <span class="m">222</span>
records returned: <span class="m">0</span>
Elapsed: <span class="m">0</span>.062672
</pre></div>
</div>
<p>Search for “dinosaur” in the title (<code class="docutils literal notranslate"><span class="pre">1=4</span></code>) or subject field (<code class="docutils literal notranslate"><span class="pre">1=21</span></code>):</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>find @or @attr <span class="nv">1</span><span class="o">=</span><span class="m">4</span> <span class="s2">&quot;dinosaur&quot;</span> @attr <span class="nv">1</span><span class="o">=</span><span class="m">21</span> <span class="s2">&quot;dinosaur&quot;</span>
</pre></div>
</div>
<p><strong>Output:</strong></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>Sent searchRequest.
Received SearchResponse.
Search was a success.
Number of hits: <span class="m">235</span>
records returned: <span class="m">0</span>
Elapsed: <span class="m">0</span>.059067
</pre></div>
</div>
<p>Search for “Arnold, Caroline” in the author field (<code class="docutils literal notranslate"><span class="pre">1=1003</span></code>):</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>find @attr <span class="nv">1</span><span class="o">=</span><span class="m">1003</span> <span class="s2">&quot;Arnold, Caroline&quot;</span>
</pre></div>
</div>
<p><strong>Output:</strong></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>Sent searchRequest.
Received SearchResponse.
Search was a success.
Number of hits: <span class="m">35</span>
records returned: <span class="m">0</span>
Elapsed: <span class="m">0</span>.038725
</pre></div>
</div>
<p>Search for “Arnold, Caroline” in the author field (<code class="docutils literal notranslate"><span class="pre">1=1003</span></code>) and “dinosaur” in the title field (<code class="docutils literal notranslate"><span class="pre">1=4</span></code>):</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>find @and @attr <span class="nv">1</span><span class="o">=</span><span class="m">1003</span> <span class="s2">&quot;Arnold, Caroline&quot;</span> @attr <span class="nv">1</span><span class="o">=</span><span class="m">4</span> <span class="s2">&quot;dinosaur&quot;</span>
</pre></div>
</div>
<p><strong>Output:</strong></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>Sent searchRequest.
Received SearchResponse.
Search was a success.
Number of hits: <span class="m">3</span>
records returned: <span class="m">0</span>
Elapsed: <span class="m">0</span>.008387
</pre></div>
</div>
</section>
<section id="identifier-searches">
<h4>Identifier searches<a class="headerlink" href="#identifier-searches" title="Permalink to this headline">#</a></h4>
<p>Search for the government document <code class="docutils literal notranslate"><span class="pre">NAS</span> <span class="pre">1.15:110209</span></code> by GPO number (<code class="docutils literal notranslate"><span class="pre">1=50</span></code>):</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>find @attr <span class="nv">1</span><span class="o">=</span><span class="m">50</span> <span class="s2">&quot;NAS 1.15:110209&quot;</span>
</pre></div>
</div>
<p><strong>Output:</strong></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>Sent searchRequest.
Received SearchResponse.
Search was a success.
Number of hits: <span class="m">1</span>
records returned: <span class="m">0</span>
Elapsed: <span class="m">0</span>.024986
</pre></div>
</div>
<p>Find all LC call numbers (<code class="docutils literal notranslate"><span class="pre">1=16</span></code>) matches that start with <code class="docutils literal notranslate"><span class="pre">TP145</span></code>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>find @attr <span class="nv">1</span><span class="o">=</span><span class="m">16</span> <span class="s2">&quot;TP145&quot;</span>
</pre></div>
</div>
<p><strong>Output:</strong></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>Sent searchRequest.
Received SearchResponse.
Search was a success.
Number of hits: <span class="m">92</span>
records returned: <span class="m">0</span>
Elapsed: <span class="m">0</span>.027160
</pre></div>
</div>
</section>
</section>
<section id="searching-ua-libraries-catalog-in-a-loop">
<h3>2. Searching UA Libraries Catalog in a Loop<a class="headerlink" href="#searching-ua-libraries-catalog-in-a-loop" title="Permalink to this headline">#</a></h3>
<p>Here are a few ways to run multiple searches with <code class="docutils literal notranslate"><span class="pre">yaz-client</span></code>:</p>
<p>First, create a file with your queries. In this example we will search
for 5 books via their ISBN identifiers:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>cat mysearches
</pre></div>
</div>
<p><strong>Output:</strong></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>open library.ua.edu:7090/voyager
find @1<span class="o">=</span><span class="m">7</span> <span class="s2">&quot;1683925041&quot;</span>
sleep <span class="m">1</span>
find @1<span class="o">=</span><span class="m">7</span> <span class="s2">&quot;9780470183014&quot;</span>
sleep <span class="m">1</span>
find @1<span class="o">=</span><span class="m">7</span> <span class="s2">&quot;1565925858&quot;</span>
sleep <span class="m">1</span>
find @1<span class="o">=</span><span class="m">7</span> <span class="s2">&quot;9780136778851&quot;</span>
sleep <span class="m">1</span>
find @1<span class="o">=</span><span class="m">7</span> <span class="s2">&quot;1785284444&quot;</span>
quit
</pre></div>
</div>
<p>Next, run <code class="docutils literal notranslate"><span class="pre">yaz-client</span></code> with the option <code class="docutils literal notranslate"><span class="pre">-f</span></code>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>yaz-client -f mysearches
</pre></div>
</div>
<p><strong>Output:</strong></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>Connecting...OK.
Sent initrequest.
Connection accepted by v3 target.
ID     : <span class="m">34</span>
Name   : Voyager LMS - Z39.50 Server
Version: <span class="m">2010</span>.3.0
Options: search present
Elapsed: <span class="m">0</span>.353889
Sent searchRequest.
Received SearchResponse.
Search was a success.
Number of hits: <span class="m">1</span>
records returned: <span class="m">0</span>
Elapsed: <span class="m">0</span>.007999
Done sleeping <span class="m">1</span> seconds
Sent searchRequest.
Received SearchResponse.
Search was a success.
Number of hits: <span class="m">1</span>
records returned: <span class="m">0</span>
Elapsed: <span class="m">0</span>.005176
Done sleeping <span class="m">1</span> seconds
Sent searchRequest.
Received SearchResponse.
Search was a success.
Number of hits: <span class="m">2</span>
records returned: <span class="m">0</span>
Elapsed: <span class="m">0</span>.004862
Done sleeping <span class="m">1</span> seconds
Sent searchRequest.
Received SearchResponse.
Search was a success.
Number of hits: <span class="m">1</span>
records returned: <span class="m">0</span>
Elapsed: <span class="m">0</span>.004774
Done sleeping <span class="m">1</span> seconds
Sent searchRequest.
Received SearchResponse.
Search was a success.
Number of hits: <span class="m">1</span>
records returned: <span class="m">0</span>
Elapsed: <span class="m">0</span>.003902
See you later, alligator.
</pre></div>
</div>
<p>Here is an alternative method with a bash loop:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> isbn <span class="k">in</span> <span class="se">\</span>
   <span class="s2">&quot;1683925041&quot;</span> <span class="se">\</span>
   <span class="s2">&quot;9780470183014&quot;</span> <span class="se">\</span>
   <span class="s2">&quot;1565925858&quot;</span> <span class="se">\</span>
   <span class="s2">&quot;9780136778851&quot;</span> <span class="se">\</span>
   <span class="s2">&quot;1785284444&quot;</span>
<span class="k">do</span>
   <span class="nb">printf</span> <span class="s2">&quot;open library.ua.edu:7090/voyager\nfind @1=7 &quot;</span><span class="nv">$isbn</span><span class="s2">&quot;\nquit\n&quot;</span> <span class="p">|</span>
   yaz-client -f /dev/stdin
   sleep <span class="m">1</span>
<span class="k">done</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">/dev/stdin</span></code> allows us to pass a string via stdin with the <code class="docutils literal notranslate"><span class="pre">-f</span></code> option, since <code class="docutils literal notranslate"><span class="pre">yaz-client</span> <span class="pre">-f</span></code>
expects a file <a class="footnote-reference brackets" href="#ref6" id="id8">7</a>.</p>
</div>
<p>And here is a more efficient method suggested on GitHub which does not quit <code class="docutils literal notranslate"><span class="pre">yaz-client</span></code> on each loop <a class="footnote-reference brackets" href="#ref7" id="id9">8</a>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> isbn <span class="k">in</span> <span class="se">\</span>
   <span class="s2">&quot;1683925041&quot;</span> <span class="se">\</span>
   <span class="s2">&quot;9780470183014&quot;</span> <span class="se">\</span>
   <span class="s2">&quot;1565925858&quot;</span> <span class="se">\</span>
   <span class="s2">&quot;9780136778851&quot;</span> <span class="se">\</span>
   <span class="s2">&quot;1785284444&quot;</span>
<span class="k">do</span>
   <span class="nb">printf</span> <span class="s2">&quot;open library.ua.edu:7090/voyager\nfind @1=7 &quot;</span><span class="nv">$isbn</span><span class="s2">&quot;\nsleep 1\n&quot;</span>
<span class="k">done</span> <span class="p">|</span> yaz-client -f /dev/stdin
</pre></div>
</div>
<p>Finally, if you have a file with your search strings as one per line, use a while loop to avoid having to
write out your strings or declaring them as a bash variable:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>cat isbns.txt
</pre></div>
</div>
<p><strong>Output:</strong></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="m">1683925041</span>
<span class="m">9780470183014</span>
<span class="m">1565925858</span>
<span class="m">9780136778851</span>
<span class="m">1785284444</span>
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>cat isbns.txt <span class="p">|</span>
<span class="k">while</span> <span class="nb">read</span> isbn
<span class="k">do</span>
   <span class="nb">printf</span> <span class="s2">&quot;open library.ua.edu:7090/voyager\nfind @1=7 &quot;</span><span class="nv">$isbn</span><span class="s2">&quot;\nsleep 1\n&quot;</span>
<span class="k">done</span> <span class="p">|</span> yaz-client -f /dev/stdin
</pre></div>
</div>
</section>
<section id="retrieve-record-s-data">
<h3>3. Retrieve Record(s) Data<a class="headerlink" href="#retrieve-record-s-data" title="Permalink to this headline">#</a></h3>
<section id="usmarc">
<h4>USmarc<a class="headerlink" href="#usmarc" title="Permalink to this headline">#</a></h4>
<p>For catalog records at The University of Alabama, the default format returned within <code class="docutils literal notranslate"><span class="pre">yaz-client</span></code>
is USmarc (MARC 21). The records are rendered as (mostly) human-readable within the terminal output.
If you are looking for “raw” MARC, that is, the complete machine-readable binary file, see the
below section on “Saving Raw MARC data”.</p>
<p>To retrieve records in the terminal with <code class="docutils literal notranslate"><span class="pre">yaz-client</span></code>, use the <code class="docutils literal notranslate"><span class="pre">show</span></code> command with a start
postion and optional number of records. For example, to get the first record:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>open library.ua.edu:7090/voyager
</pre></div>
</div>
<p><strong>Output:</strong></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>Connecting...OK.
Sent initrequest.
Connection accepted by v3 target.
ID     : <span class="m">34</span>
Name   : Voyager LMS - Z39.50 Server
Version: <span class="m">2010</span>.3.0
Options: search present
Elapsed: <span class="m">0</span>.514120
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>find @or @attr <span class="nv">1</span><span class="o">=</span><span class="m">4</span> <span class="s2">&quot;dinosaur&quot;</span> @attr <span class="nv">1</span><span class="o">=</span><span class="m">4</span> <span class="s2">&quot;dinosauria&quot;</span>
</pre></div>
</div>
<p><strong>Output:</strong></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>Sent searchRequest.
Received SearchResponse.
Search was a success.
Number of hits: <span class="m">222</span>
records returned: <span class="m">0</span>
Elapsed: <span class="m">0</span>.087466
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>show <span class="m">1</span>
</pre></div>
</div>
<p><strong>Output:</strong></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>Sent presentRequest <span class="o">(</span><span class="m">1</span>+1<span class="o">)</span>.
Records: <span class="m">1</span>
<span class="o">[</span>VOYAGER<span class="o">]</span>Record type: USmarc
01239cam  2200325Ka <span class="m">4500</span>
<span class="m">001</span> <span class="m">3444796</span>
<span class="m">005</span> <span class="m">20171110111851</span>.0
<span class="m">008</span> 101221s2008    nyua   b      <span class="m">000</span> <span class="m">0</span> eng d
<span class="m">020</span>    <span class="nv">$a</span> <span class="m">0760783950</span>
<span class="m">020</span>    <span class="nv">$a</span> <span class="m">9780760783955</span>
<span class="m">035</span>    <span class="nv">$a</span> <span class="o">(</span>OCoLC<span class="o">)</span>ocn828688251
<span class="m">035</span>    <span class="nv">$a</span> <span class="o">(</span>OCoLC<span class="o">)</span><span class="m">828688251</span>
<span class="m">035</span>    <span class="nv">$a</span> <span class="m">3444796</span>
<span class="m">040</span>    <span class="nv">$a</span> ALM <span class="nv">$c</span> ALM <span class="nv">$d</span> UtOrBLW
<span class="m">049</span>    <span class="nv">$a</span> ALMM
<span class="m">050</span>  <span class="m">4</span> <span class="nv">$a</span> PZ7.H672 <span class="nv">$b</span> Adv <span class="m">2008</span>
<span class="m">100</span> <span class="m">1</span>  <span class="nv">$a</span> Hoff, Syd, <span class="nv">$d</span> <span class="m">1912</span>-2004. <span class="nv">$0</span> http://id.loc.gov/authorities/names/n78086441
<span class="m">245</span> <span class="m">10</span> <span class="nv">$a</span> Adventures of Danny and the dinosaur / <span class="nv">$c</span> Syd Hoff.
<span class="m">264</span>  <span class="m">1</span> <span class="nv">$a</span> New York : <span class="nv">$b</span> Barnes <span class="p">&amp;</span> Noble, <span class="nv">$c</span> <span class="m">2008</span>.
<span class="m">300</span>    <span class="nv">$a</span> <span class="m">128</span> pages : <span class="nv">$b</span> color illustrations <span class="p">;</span> <span class="nv">$c</span> <span class="m">24</span> cm.
<span class="m">336</span>    <span class="nv">$a</span> text <span class="nv">$b</span> txt <span class="nv">$2</span> rdacontent
<span class="m">337</span>    <span class="nv">$a</span> unmediated <span class="nv">$b</span> n <span class="nv">$2</span> rdamedia
<span class="m">338</span>    <span class="nv">$a</span> volume <span class="nv">$b</span> nc <span class="nv">$2</span> rdacarrier
<span class="m">490</span> <span class="m">1</span>  <span class="nv">$a</span> I can <span class="nb">read</span>
<span class="m">505</span> <span class="m">0</span>  <span class="nv">$a</span> Danny and the dinosaur -- Happy birthday, Danny and the dinosaur! -- Danny and the dinosaur go to camp.
<span class="m">520</span>    <span class="nv">$a</span> Danny goes to a museum to see the dinosaurs and ends up spending the day outside with one.
<span class="m">650</span>  <span class="m">1</span> <span class="nv">$a</span> Dinosaurs <span class="nv">$v</span> Fiction.
<span class="m">650</span>  <span class="m">0</span> <span class="nv">$a</span> Dinosaurs <span class="nv">$v</span> Juvenile fiction. <span class="nv">$0</span> http://id.loc.gov/authorities/subjects/sh2008102274
<span class="m">830</span>  <span class="m">0</span> <span class="nv">$a</span> I can <span class="nb">read</span> book. <span class="nv">$0</span> http://id.loc.gov/authorities/names/n42013105
<span class="m">994</span>    <span class="nv">$a</span> C0 <span class="nv">$b</span> ALM

<span class="nv">nextResultSetPosition</span> <span class="o">=</span> <span class="m">2</span>
Elapsed: <span class="m">0</span>.060194
</pre></div>
</div>
<p>To show the first 3 results, add a stop position <code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">1</span> <span class="pre">+</span> <span class="pre">4</span></code>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>open library.ua.edu:7090/voyager
find @or @attr <span class="nv">1</span><span class="o">=</span><span class="m">4</span> <span class="s2">&quot;dinosaur&quot;</span> @attr <span class="nv">1</span><span class="o">=</span><span class="m">4</span> <span class="s2">&quot;dinosauria&quot;</span>
show <span class="m">1</span> + <span class="m">4</span>
quit
</pre></div>
</div>
<p>To quickly scan multiple records from a search, we can pipe the USMarc stdout to <code class="docutils literal notranslate"><span class="pre">grep</span></code> and display selected lines:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">printf</span> <span class="s2">&quot;open library.ua.edu:7090/voyager\nfind @or @attr 1=4 &quot;</span>dinosaur<span class="s2">&quot; @attr 1=4 &quot;</span>dinosauria<span class="s2">&quot;\nshow 1+10\n&quot;</span> <span class="p">|</span> <span class="se">\</span>
yaz-client -f /dev/stdin <span class="p">|</span> grep <span class="s2">&quot;^245&quot;</span>
</pre></div>
</div>
<p><strong>Output:</strong></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="m">245</span> <span class="m">10</span> <span class="nv">$a</span> Adventures of Danny and the dinosaur / <span class="nv">$c</span> Syd Hoff.
<span class="m">245</span> <span class="m">10</span> <span class="nv">$a</span> Age of tephra beds at the Ocean Point dinosaur locality, North Slope, Alaska, based on K-Ar and 40Ar/39Ar analyses / <span class="nv">$c</span> by James E. Conrad, Edwin H. McKee, and Brent D. Turrin.
<span class="m">245</span> <span class="m">10</span> <span class="nv">$a</span> Age of tephra beds at the Ocean Point dinosaur locality, North Slope, Alaska, based on K-Ar and 40Ar/39Ar analyses / <span class="nv">$c</span> by James E. Conrad, Edwin H. McKee, and Brent D. Turrin.
<span class="m">245</span> <span class="m">10</span> <span class="nv">$a</span> American dinosaur abroad : <span class="nv">$b</span> a cultural <span class="nb">history</span> of Carnegie<span class="s1">&#39;s plaster diplodocus / $c Ilja Nieuwland.</span>
<span class="s1">245 10 $a American experience. $p Dinosaur wars $h [videorecording] / $c WGBH Boston ; produced by Mark Davis and Anna Saraceno ; written and directed by Mark Davis.</span>
<span class="s1">245 14 $a The archaeology of Castle Park Dinosaur National Monument / $c by Robert F. Burgh and Charles R. Scoggin, with appendices by Edgar Anderson, Richard E. Pillmore [and] Volney H. Jones.</span>
<span class="s1">245 10 $a Archeological investigations at two sites in Dinosaur National Monument $h [microform] : $b 42UN1724 and 5MF2645 / $c by James A. Truesdale.</span>
<span class="s1">245 00 $a Artist With Dinosaur Model $h [electronic resource].</span>
<span class="s1">245 10 $a Atlas of dinosaur adventures / $c illustrated by Lucy Letherland ; written by Emily Hawkins.</span>
<span class="s1">245 10 $a Auks, rocks, and the odd dinosaur : $b inside stories from the Smithsonian&#39;</span>s Museum of Natural History / <span class="nv">$c</span> Peggy Thomson.
</pre></div>
</div>
<p>How cool is that!</p>
</section>
<section id="opac">
<h4>OPAC<a class="headerlink" href="#opac" title="Permalink to this headline">#</a></h4>
<p>The University of Alabama Catalog also support the OPAC format, which can be useful for finding the
library location or checking if a book is available:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>open library.ua.edu:7090/voyager
find @1<span class="o">=</span><span class="m">4</span> <span class="s2">&quot;core python programming&quot;</span>
format opac
show <span class="m">1</span>
</pre></div>
</div>
<p><strong>Output:</strong></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>...
...
...
Data holdings <span class="m">0</span>
typeOfRecord: x
encodingLevel: <span class="m">1</span>
receiptAcqStatus: <span class="m">2</span>
generalRetention: <span class="m">8</span>
completeness: <span class="m">4</span>
dateOfReport: <span class="m">000000</span>
nucCode: sel
localLocation: Science <span class="p">&amp;</span> Engineering Library
callNumber: QA76.73.P98 C48 <span class="m">2007</span>
circulation <span class="m">0</span>
availableNow: <span class="m">1</span>
itemId: <span class="m">2359071</span>
renewable: <span class="m">0</span>
onHold: <span class="m">0</span>
<span class="nv">nextResultSetPosition</span> <span class="o">=</span> <span class="m">2</span>
Elapsed: <span class="m">0</span>.060914
</pre></div>
</div>
<p>So here is a fun example, let’s look at the availability of
print books in the C (Computer program language) subject heading:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">printf</span> <span class="s2">&quot;open library.ua.edu:7090/voyager\nfind @not @attr 1=21 \&quot;C (Computer program language)\&quot; \</span>
<span class="s2">@attr 1=1016 \&quot;electronic resource\&quot;\nformat opac\nshow 1+10\n&quot;</span> <span class="p">|</span> <span class="se">\</span>
yaz-client -f /dev/stdin <span class="p">|</span> grep --text -e <span class="s2">&quot;^245&quot;</span> -e <span class="s2">&quot;callNumber&quot;</span> -e <span class="s2">&quot;availableNow&quot;</span> -e <span class="s2">&quot;localLocation&quot;</span>
</pre></div>
</div>
<p><strong>Output:</strong></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="m">245</span> <span class="m">10</span> <span class="nv">$a</span> Applications of numerical techniques with C / <span class="nv">$c</span> Suresh Chandra.
localLocation: Archival Facility <span class="o">(</span>use Request Item button <span class="k">for</span> retrieval<span class="o">)</span>
callNumber: QA297 .C49 <span class="m">2006</span>
availableNow: <span class="m">1</span>
localLocation: Science <span class="p">&amp;</span> Engineering Library
callNumber: QA297 .C49 <span class="m">2006</span>
availableNow: <span class="m">1</span>
<span class="m">245</span> <span class="m">10</span> <span class="nv">$a</span> Artificial intelligence using C / <span class="nv">$c</span> Herbert Schildt.
localLocation: Science <span class="p">&amp;</span> Engineering Library
callNumber: Q336 .S35 <span class="m">1987</span>
availableNow: <span class="m">1</span>
<span class="m">245</span> <span class="m">12</span> <span class="nv">$a</span> A book on C : <span class="nv">$b</span> programming <span class="k">in</span> C / <span class="nv">$c</span> Al Kelley, Ira Pohl.
localLocation: Science <span class="p">&amp;</span> Engineering Library
callNumber: QA76.73.C15 K44 <span class="m">1998</span>
availableNow: <span class="m">1</span>
<span class="m">245</span> <span class="m">10</span> <span class="nv">$a</span> C.
localLocation: Gorgas Library Gov. Doc.
callNumber: C <span class="m">13</span>.52:160
availableNow: <span class="m">1</span>
<span class="m">245</span> <span class="m">10</span> <span class="nv">$a</span> C <span class="p">&amp;</span> C++ code capsules : <span class="nv">$b</span> a guide <span class="k">for</span> practitioners / <span class="nv">$c</span> Chuck Allison <span class="p">;</span> <span class="o">[</span>foreword by Bruce Eckel<span class="o">]</span>.
localLocation: Science <span class="p">&amp;</span> Engineering Library
callNumber: QA76.73.C15 A44 <span class="m">1998</span>
availableNow: <span class="m">1</span>
<span class="m">245</span> <span class="m">10</span> <span class="nv">$a</span> C, an introduction to programming / <span class="nv">$c</span> Jim Keogh, Peter Aitken, Bradley L. Jones.
localLocation: Gorgas Library
callNumber: QA76.73.C15 K466<span class="p">;</span> <span class="m">1996</span>
availableNow: <span class="m">1</span>
<span class="m">245</span> <span class="m">14</span> <span class="nv">$a</span> The C and UNIX dictionary : <span class="nv">$b</span> from absolute pathname to Zombie / <span class="nv">$c</span> Kaare Christian.
localLocation: Science <span class="p">&amp;</span> Engineering Library
callNumber: QA76.73.C15 C49 <span class="m">1988</span>
availableNow: <span class="m">1</span>
<span class="m">245</span> <span class="m">10</span> <span class="nv">$a</span> C/C++ programmers reference / <span class="nv">$c</span> Herbert Schildt.
localLocation: Science <span class="p">&amp;</span> Engineering Library
callNumber: QA76.73.C15 S348<span class="p">;</span> <span class="m">1997</span>
availableNow: <span class="m">0</span>
<span class="m">245</span> <span class="m">10</span> <span class="nv">$a</span> C <span class="k">for</span> programmers : <span class="nv">$b</span> a <span class="nb">complete</span> tutorial based on the ANSI standard / <span class="nv">$c</span> Leendert Ammeraal.
localLocation: Science <span class="p">&amp;</span> Engineering Library
callNumber: QA76.73.C15 A46<span class="p">;</span> <span class="m">1991</span>
availableNow: <span class="m">1</span>
localLocation: Science <span class="p">&amp;</span> Engineering Library
callNumber: QA76.73.C15 A46<span class="p">;</span> <span class="m">1991</span>
availableNow: <span class="m">1</span>
<span class="m">245</span> <span class="m">10</span> <span class="nv">$a</span> C <span class="k">in</span> a nutshell / <span class="nv">$c</span> Peter Prinz and Tony Crawford.
localLocation: Science <span class="p">&amp;</span> Engineering Library
callNumber: QA76.73.C15 P74 <span class="m">2016</span>
availableNow: <span class="m">1</span>
</pre></div>
</div>
</section>
<section id="saving-raw-marc-data">
<h4>Saving Raw MARC data<a class="headerlink" href="#saving-raw-marc-data" title="Permalink to this headline">#</a></h4>
<p>If you are looking to process or parse MARC records with software designed for MARC,
you probably want the Raw binary MARC. In that case, you can
use the <code class="docutils literal notranslate"><span class="pre">yaz-client</span> <span class="pre">set_marcdump</span></code> command to save the results to a named binary MARC file:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>open library.ua.edu:7090/voyager
find @not @attr <span class="nv">1</span><span class="o">=</span><span class="m">21</span> <span class="s2">&quot;C (Computer program language)&quot;</span> @attr <span class="nv">1</span><span class="o">=</span><span class="m">1016</span> <span class="s2">&quot;electronic resource&quot;</span>
set_marcdump C_books.marc
show <span class="m">1</span>+10
quit
</pre></div>
</div>
<p>If you have multiple queries and want to use a loop as shown in above to save MARC data, here
is one potential workflow that would print human-readable MARC to the terminal output and
save a file, isbn_records.marc, with the Raw binary MARC data:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>cat isbns.txt <span class="p">|</span>
<span class="k">while</span> <span class="nb">read</span> isbn
<span class="k">do</span>
   <span class="nb">printf</span> <span class="s2">&quot;open library.ua.edu:7090/voyager\nfind @1=7 &quot;</span><span class="nv">$isbn</span><span class="s2">&quot;\nshow 1\nsleep 1\n&quot;</span>
<span class="k">done</span> <span class="p">|</span> yaz-client -f /dev/stdin -m isbn_records.marc
</pre></div>
</div>
</section>
</section>
<section id="z39-demo-a-small-z39-50-c-program-using-the-yaz-toolkit">
<h3>4. z39-demo - A small Z39.50 C program using the YAZ toolkit<a class="headerlink" href="#z39-demo-a-small-z39-50-c-program-using-the-yaz-toolkit" title="Permalink to this headline">#</a></h3>
<p>Since Index Data YAZ is a complete toolkit, it’s possible to write your own custom Z39.50 software.</p>
<p>As a result, we created a demonstration C program called <code class="docutils literal notranslate"><span class="pre">z39-demo</span></code>:</p>
<p><a class="reference external" href="https://github.com/ualibweb/z39-demo">https://github.com/ualibweb/z39-demo</a></p>
<p><code class="docutils literal notranslate"><span class="pre">z39-demo</span></code> is a small command line program written in C that can run Z39.50 searches via an input query
or an input file. By default <code class="docutils literal notranslate"><span class="pre">z39-demo</span></code> searches The University of Alabama library catalog,
but it can accept different Z39.50 connections as an option. <code class="docutils literal notranslate"><span class="pre">z39-demo</span></code> is not as feature complete as <code class="docutils literal notranslate"><span class="pre">yaz-client</span></code>,
but it offers a few conveniences and was a lot of fun to design and program.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Consider <code class="docutils literal notranslate"><span class="pre">z39.50-demo</span></code> as an experiment program, it’s not well-tested.</p>
</div>
<section id="dependencies">
<h4>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">#</a></h4>
<p>This will vary depending on your operating system and environment,
however, here were the dependencies and related software we installed on Ubuntu 22.04 LTS:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>sudo apt-get install build-essential manpages-dev glibc-doc gcc-doc make-doc
</pre></div>
</div>
</section>
<section id="compiling-from-source">
<h4>Compiling from source<a class="headerlink" href="#compiling-from-source" title="Permalink to this headline">#</a></h4>
<p>There are several possible workflows for compiling the <code class="docutils literal notranslate"><span class="pre">z39-demo</span></code> program,
here is one method that worked well for us on Ubuntu based linux:</p>
<ol class="arabic simple">
<li><p>Download latest yaz_5.**.orig.tar.gz from: <a class="reference external" href="https://ftp.indexdata.com/pub/yaz/ubuntu/jammy/">https://ftp.indexdata.com/pub/yaz/ubuntu/jammy/</a></p></li>
<li><p>Unarchive folder, then:</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> yaz_5.33.0
./configure
make
</pre></div>
</div>
</section>
<section id="running-z39-demo">
<h4>Running z39-demo<a class="headerlink" href="#running-z39-demo" title="Permalink to this headline">#</a></h4>
<p>Shown below is the command to output the help file for the program in the terminal.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>./z39-demo -h
</pre></div>
</div>
<p><strong>Output:</strong></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>usage: myprogram <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>-z<span class="o">]</span> <span class="o">[</span>-o<span class="o">]</span> -q/-i FILE

z39-demo is a <span class="nb">command</span> line program that can run Z39.50 searches via an input query or an input file

positional arguments:
   -q           required query <span class="k">for</span> Z39.50 search
   -i FILE      input file with queries <span class="k">for</span> Z39.50 with one per line
optional arguments
   -h, -help    show <span class="nb">help</span> and <span class="nb">exit</span>
   -z           optional custom Z39.50 adress<span class="p">;</span> default is University of Alabama Libraries Catalog
   -o FILE      optional to output binary MARC file <span class="o">(</span>FILE <span class="m">100</span> chars max.<span class="o">)</span><span class="p">;</span> default is to print to stdout <span class="k">in</span> MARC ASCII format
   -n number    optional to output specified number of results<span class="p">;</span> default is to print the maximum number of results
</pre></div>
</div>
<p>To search a query, use <code class="docutils literal notranslate"><span class="pre">-q</span></code> and specify a number of returned results with <code class="docutils literal notranslate"><span class="pre">-n</span></code> followed by a space and digit(s).
By default, the UA Libraries Catalog is searched, and the returned MARC record(s) are sent to stdout:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>./z39-demo -q <span class="s2">&quot;@attr 1=4 @attr 3=1 @attr 5=1 \&quot;dinosaur\&quot;&quot;</span> -n <span class="m">1</span>
</pre></div>
</div>
<p><strong>Output:</strong></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>02574cem  2200529 i 4500
001 7845907
005 20181211165730.0
007 aj canzn
008 180604s2018    dcubg     a  f  0   eng c
034 1  $a a $b 150000 $d W1092111 $e W1082735 $f N0444580 $g N0401450
035    $a (marcive)tmp97451983
035    $a (OCoLC)on1037101363
035    $a 7845907
040    $a GPO $b eng $e rda $c GPO $d MvI $d UtOrBLW
042    $a pcc
043    $a n-us-co $a n-us-ut
049    $a GPBS
052    $a 4311 $b D5
052    $a 4341
074    $a 0650
086 0  $a I 29.21:D 61/2018
110 1  $a United States. $b National Park Service, $e cartographer. $0 http://id.loc.gov/authorities/names/n79022809
245 10 $a Dinosaur National Monument, Colorado/Utah / $c National Park Service, U.S. Department of the Interior.
246 1  $i Alternative title: $a Dinosaur
246 1  $i Title from verso: $a Visiting Dinosaur National Monument
250    $a Last updated 2018.
255    $a Scale approximately 1:150,000 $c (W 109�21&#39;11&quot;--W 108�27&#39;35&quot;/N 40�44&#39;58&quot;--N 40�14&#39;50&quot;).
264  1 $a [Washington, D.C.] : $b National Park Service, U.S. Department of the Interior, $c [2018]
300    $a 1 map : $b color ; $c 58 x 43 cm, on sheet 60 x 43 cm, folded to 10 x 22 cm
336    $a cartographic image $b cri $2 rdacontent
337    $a unmediated $b n $2 rdamedia
338    $a sheet $b nb $2 rdacarrier
500    $a &quot;*GPO: 2018--403-332/82048.&quot;
500    $a Shipping list no.: 2018-0235-P.
500    $a Title from panel.
500    $a Relief shown by shading and spot heights.
500    $a Includes text, timeline, area map, and color illustrations.
500    $a Text, points of interest, and color illustrations on verso.
650  0 $a National monuments $z Colorado $v Maps. $0 http://id.loc.gov/authorities/subjects/sh85090029
650  0 $a National monuments $z Utah $v Maps. $0 http://id.loc.gov/authorities/subjects/sh85090039
650  0 $a National parks and reserves $z Colorado $v Maps. $0 http://id.loc.gov/authorities/subjects/sh85090065
650  0 $a National parks and reserves $z Utah $v Maps. $0 http://id.loc.gov/authorities/subjects/sh85090104
650  0 $a Hiking $z Colorado $v Maps. $0 http://id.loc.gov/authorities/subjects/sh85060793
650  0 $a Hiking $z Utah $v Maps. $0 http://id.loc.gov/authorities/subjects/sh85060793
651  0 $a Dinosaur National Monument (Colo. and Utah) $v Maps. $0 http://id.loc.gov/authorities/subjects/sh85038092
655  7 $a Maps. $2 lcgft $0 http://id.loc.gov/authorities/genreForms/gf2011026387
655  7 $a Tourist maps. $2 lcgft $0 http://id.loc.gov/authorities/genreForms/gf2011026699
</pre></div>
</div>
<p>Here is how to output and save the binary MARC to a file:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>./z39-demo -q <span class="s2">&quot;@attr 1=4 @attr 3=1 @attr 5=1 \&quot;dinosaur\&quot;&quot;</span> -o test.marc -n <span class="m">1</span>
</pre></div>
</div>
<p>To use a custom server address, add <code class="docutils literal notranslate"><span class="pre">-z</span></code> along with the address to search the query.</p>
<p>Here is an example with the National Library of Medicine:</p>
<p><a class="reference external" href="https://support.nlm.nih.gov/knowledgebase/article/KA-04188/en-us">https://support.nlm.nih.gov/knowledgebase/article/KA-04188/en-us</a></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>./z39-demo -z <span class="s2">&quot;na91.alma.exlibrisgroup.com:1921/01NLM_INST&quot;</span> -q <span class="s2">&quot;@1=4 dinosaur&quot;</span> -n <span class="m">1</span>
</pre></div>
</div>
<p><strong>Output:</strong></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>00898cam a2200313 a <span class="m">4500</span>
<span class="m">001</span> <span class="m">997189573406676</span>
<span class="m">005</span> <span class="m">20211203201556</span>.0
<span class="m">008</span> 920813s1991    xxu<span class="o">||||</span>  <span class="o">||||</span> <span class="m">00</span><span class="o">||</span><span class="m">0</span><span class="p">|</span>eng
<span class="m">010</span>    <span class="nv">$a</span> <span class="m">90</span>-55948
<span class="m">020</span>    <span class="nv">$a</span> <span class="m">9780060165383</span>
<span class="m">020</span>    <span class="nv">$a</span> <span class="m">0060165383</span>
<span class="m">035</span>    <span class="nv">$9</span> <span class="m">9212018</span>
<span class="m">035</span>    <span class="nv">$a</span> <span class="o">(</span>OCoLC<span class="o">)</span><span class="m">23141186</span>
<span class="m">040</span>    <span class="nv">$a</span> DNLM <span class="nv">$c</span> DNLM
<span class="m">041</span> <span class="m">0</span>  <span class="nv">$a</span> eng
<span class="m">044</span>    <span class="nv">$9</span> United States
<span class="m">060</span> <span class="m">00</span> <span class="nv">$a</span> WM <span class="m">203</span> <span class="nv">$b</span> B351d <span class="m">1991</span>
<span class="m">100</span> <span class="m">1</span>  <span class="nv">$a</span> Baur, Susan.
<span class="m">245</span> <span class="m">14</span> <span class="nv">$a</span> The dinosaur man : <span class="nv">$b</span> tales of madness and enchantment from the back ward / <span class="nv">$c</span> Susan Baur.
<span class="m">260</span>    <span class="nv">$a</span> New York, N.Y. : <span class="nv">$b</span> Edward Burlingame Books, <span class="nv">$c</span> c1991.
<span class="m">300</span>    <span class="nv">$a</span> ix, <span class="m">203</span> p. : <span class="nv">$b</span> ill.
<span class="m">336</span>    <span class="nv">$a</span> text <span class="nv">$b</span> txt <span class="nv">$2</span> rdacontent
<span class="m">337</span>    <span class="nv">$a</span> unmediated <span class="nv">$b</span> n <span class="nv">$2</span> rdamedia
<span class="m">338</span>    <span class="nv">$a</span> volume <span class="nv">$b</span> nc <span class="nv">$2</span> rdacarrier
<span class="m">650</span>  <span class="m">2</span> <span class="nv">$a</span> Schizophrenia
<span class="m">655</span>  <span class="m">2</span> <span class="nv">$a</span> Popular Work
<span class="m">935</span>    <span class="nv">$a</span> <span class="o">(</span>DNLM<span class="o">)</span><span class="m">718957</span>-nlmdb
<span class="m">995</span>    <span class="nv">$a</span> AUTH <span class="nv">$b</span> <span class="m">19920813</span> <span class="nv">$c</span> REV <span class="nv">$d</span> <span class="m">20181116</span>
<span class="m">999</span>    <span class="nv">$a</span> AUTH
</pre></div>
</div>
<p>To search multiple queries, put your search strings in a file with one per line:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>cat mysearches
</pre></div>
</div>
<p><strong>Output:</strong></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>@1<span class="o">=</span><span class="m">7</span> <span class="m">1683925041</span>
@1<span class="o">=</span><span class="m">7</span> <span class="m">9780470183014</span>
@1<span class="o">=</span><span class="m">7</span> <span class="m">1565925858</span>
@1<span class="o">=</span><span class="m">7</span> <span class="m">9780136778851</span>
@1<span class="o">=</span><span class="m">7</span> <span class="m">1785284444</span>
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>./z39-demo -i mysearches
</pre></div>
</div>
<p class="rubric">References</p>
<dl class="footnote brackets">
<dt class="label" id="ref0"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>Ward, M. Expanding Access to Information with Z39.50. American Libraries 1994, 25 (7), 639-641. <a class="reference external" href="http://www.jstor.org/stable/25633315">http://www.jstor.org/stable/25633315</a></p>
</dd>
<dt class="label" id="ref1"><span class="brackets"><a class="fn-backref" href="#id2">2</a></span></dt>
<dd><p>Lynch, C. A. The Z39. 50 Information Retrieval Standard. D-lib Magazine 1997, 3 (4). <a class="reference external" href="http://dlib.org/dlib/april97/04lynch.html">http://dlib.org/dlib/april97/04lynch.html</a></p>
</dd>
<dt class="label" id="ref2"><span class="brackets"><a class="fn-backref" href="#id3">3</a></span></dt>
<dd><p>Needleman, M. Z39.50 - a Review, Analysis and Some Thoughts on the Future. Library Hi Tech 2000, 18 (2), 158-165. <a class="reference external" href="https://doi.org/10.1108/07378830010333545">https://doi.org/10.1108/07378830010333545</a>.</p>
</dd>
<dt class="label" id="ref3"><span class="brackets"><a class="fn-backref" href="#id4">4</a></span></dt>
<dd><p>Z39.50 Implementation Experiences. NIST Special Publication 500-229. <a class="reference external" href="https://purl.fdlp.gov/GPO/gpo100304">https://purl.fdlp.gov/GPO/gpo100304</a>.</p>
</dd>
<dt class="label" id="ref4"><span class="brackets"><a class="fn-backref" href="#id5">5</a></span></dt>
<dd><p><a class="reference external" href="https://www.loc.gov/z3950/agency/">https://www.loc.gov/z3950/agency/</a>.</p>
</dd>
<dt class="label" id="ref5"><span class="brackets">6</span><span class="fn-backref">(<a href="#id6">1</a>,<a href="#id7">2</a>)</span></dt>
<dd><p><a class="reference external" href="https://www.loc.gov/z3950/agency/Z39-50-2003.pdf">https://www.loc.gov/z3950/agency/Z39-50-2003.pdf</a></p>
</dd>
<dt class="label" id="ref6"><span class="brackets"><a class="fn-backref" href="#id8">7</a></span></dt>
<dd><p><a class="reference external" href="https://unix.stackexchange.com/questions/505828/how-to-pass-a-string-to-a-command-that-expects-a-file">https://unix.stackexchange.com/questions/505828/how-to-pass-a-string-to-a-command-that-expects-a-file</a></p>
</dd>
<dt class="label" id="ref7"><span class="brackets"><a class="fn-backref" href="#id9">8</a></span></dt>
<dd><p><a class="reference external" href="https://github.com/indexdata/yaz/issues/97">https://github.com/indexdata/yaz/issues/97</a></p>
</dd>
</dl>
</section>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./content/scripts/shell"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="../A_overview/z3950_overview.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Z39.50</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../A_overview/worldbank_overview.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">World Bank</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By The University of Alabama Libraries<br/>
  
      &copy; Copyright 2023.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>